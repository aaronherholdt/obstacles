<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obstacle Course - Main Menu</title>
    <link rel="stylesheet" href="landing.css">
    <link rel="stylesheet" href="assets/courses/thumbnails.css">
    <link rel="stylesheet" href="leaderboard.css">
</head>
<body>
    <div id="landing-container">
        <div id="title-container">
            <h1>Obstacle Course Challenge</h1>
            <p>Create and play unique 3D obstacle courses</p>
        </div>
         
        <div id="menu-container">
            <div id="create-option" class="menu-option">
                <div class="option-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                </div>
                <h2>Create</h2>
                <p>Design your own obstacle course</p>
                <button id="createButton" class="menu-button">Start Building</button>
            </div>
            
            <div id="play-option" class="menu-option">
                <div class="option-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                </div>
                <h2>Play</h2>
                <p>Choose from existing courses</p>
                <button id="playButton" class="menu-button">Select Level</button>
            </div>
            
            <div id="community-option" class="menu-option">
                <div class="option-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                    </svg>
                </div>
                <h2>Community</h2>
                <p>Play courses created by others</p>
                <button id="communityButton" class="menu-button">Browse Courses</button>
            </div>
        </div>
    </div>
    
    <!-- Add Browse Courses link -->
    <div id="browse-courses-container">
        <a href="#" id="browseCourses" class="browse-courses-link">Browse All Courses <span class="arrow">â†’</span></a>
    </div>
    
    <!-- Community courses overlay (initially hidden) -->
    <div id="community-courses" class="overlay">
        <div class="overlay-content">
            <h2>Community Courses</h2>
            
            <!-- Search and filter options -->
            <div class="community-controls">
                <div class="search-container">
                    <input type="text" id="courseSearch" placeholder="Search courses...">
                    <button id="searchButton">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                        </svg>
                    </button>
                </div>
                
                <div id="community-filters">
                    <div class="filter-group">
                        <span class="filter-label">Difficulty:</span>
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="Easy">Easy</button>
                        <button class="filter-btn" data-filter="Medium">Medium</button>
                        <button class="filter-btn" data-filter="Hard">Hard</button>
                    </div>
                    <div class="filter-group">
                        <span class="filter-label">Sort by:</span>
                        <button class="sort-btn active" data-sort="newest">Newest</button>
                        <button class="sort-btn" data-sort="popular">Popular</button>
                        <button class="sort-btn" data-sort="rating">Top Rated</button>
                    </div>
                </div>
            </div>
            
            <div id="community-grid" class="courses-grid">
                <!-- Community course items will be generated in landing.js -->
                <div class="loading-indicator">
                    <div class="spinner"></div>
                    <p>Loading community courses...</p>
                </div>
            </div>
            
            <div class="pagination-controls">
                <button id="prevPage" class="pagination-btn" disabled>Previous</button>
                <span id="pageIndicator">Page 1 of 1</span>
                <button id="nextPage" class="pagination-btn">Next</button>
            </div>
            
            <div class="overlay-footer">
                <button id="refreshCommunityButton" class="menu-button refresh-btn">Refresh</button>
                <button id="closeCommunityButton" class="menu-button">Back to Menu</button>
            </div>
        </div>
    </div>
    
    <!-- Course selection overlay (initially hidden) -->
    <div id="course-selection" class="overlay">
        <div class="overlay-content">
            <h2>Select a Course</h2>
            
            <!-- Add filtering options -->
            <div id="course-filters">
                <div class="filter-group">
                    <span class="filter-label">Difficulty:</span>
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="Easy">Easy</button>
                    <button class="filter-btn" data-filter="Medium">Medium</button>
                    <button class="filter-btn" data-filter="Hard">Hard</button>
                </div>
            </div>
            
            <div id="courses-grid">
                <!-- Course items will be generated in landing.js -->
            </div>
            <button id="closeSelectionButton" class="menu-button">Back to Menu</button>
        </div>
    </div>
    
    <script src="websocket.js"></script>
    <script src="leaderboard.js"></script>
    <script>
        function onCourseComplete(course) {
            const courseId = course.id;   // e.g., 'first-steps'
            const courseName = course.name; // e.g., 'First Steps'
            
            // Check if we're in play mode before showing the leaderboard
            // Show leaderboard if we're NOT in editor mode, OR if we're explicitly in play mode
            if (!window.location.href.includes('editor=true') || window.location.href.includes('mode=play')) {
                window.leaderboardManager.showLeaderboardOverlay(courseId, courseName);
            }
        }
        
        // Set WebSocket handler for community courses
        window.onCommunityCoursesReceived = function(courses) {
            console.log('Community courses received in landing page:', courses.length);
            if (typeof loadCommunityCoursesFromData === 'function') {
                loadCommunityCoursesFromData(courses);
            }
        };
    </script>
    <script src="landing.js"></script>
</body>
</html> 
